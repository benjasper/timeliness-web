<div
	@inOut
	*ngIf="isOpen"
	class="absolute top-0 left-0 h-screen w-screen bg-grey-very-dark opacity-50 z-40"
	(click)="close()"
></div>
<div @flyInOut *ngIf="isOpen" class="inset-center !fixed bg-white rounded-2xl p-16 z-50 shadow-xl flex flex-col">
	<div>
		<label class="label !pb-10">Reschedule work unit {{ workUnitIndex + 1 }}</label>
		<h2>
			Reschedule task&nbsp;
			<span class="h2 !text-purple">{{ task.name }}</span>
		</h2>
		<p class="text-grey-dark">Choose a time out of the options below that works for you.</p>
	</div>
	<div class="flex flex-col gap-6 mt-8">
		<ng-container *ngIf="!loading">
			<div
				*ngFor="let timespanGroup of timespanGroups"
				(click)="apply(timespanGroup)"
				class="flex flex-row group hover:cursor-pointer"
			>
				<svg-icon
					class="
						text-grey-dark
						group-hover:text-primary
						fill-current
						w-4
						transform
						-rotate-90
						mr-2
						transition-all
					"
					src="/assets/icons/icon-arrow-down.svg"
				></svg-icon>
				<div class="flex flex-row flex-wrap gap-4">
					<span
						*ngFor="let timespan of timespanGroup"
						class="sm-tag text-base grey-background px-8 py-4 rounded-full"
					>
						{{
							timespan.start.toDate().toLocaleString([], {
								weekday: 'short',
								month: 'short',
								day: '2-digit',
								hour: 'numeric',
								minute: 'numeric'
							})
						}}
						-
						{{
							timespan.end.toDate().toLocaleString([], {
								hour: 'numeric',
								minute: 'numeric'
							})
						}}
					</span>
				</div>
			</div>
		</ng-container>
		<ng-container *ngIf="loading">
			<div
				*ngFor="let timespanGroup of [1, 2, 3, 4, 5]"
				class="flex flex-row group hover:cursor-default"
			>
				<svg-icon
					class="
						text-grey-dark
						fill-current
						w-4
						transform
						-rotate-90
						mr-2
						transition-all
					"
					src="/assets/icons/icon-arrow-down.svg"
				></svg-icon>
				<div class="flex flex-row flex-wrap gap-4">
					<span
						class="sm-tag text-base grey-background px-8 py-4 rounded-full loading w-72"
					>
						&nbsp;
					</span>
				</div>
			</div>
		</ng-container>
		<p *ngIf="noOptionsAvailable">
			It seems there is no time available for reschuling this work unit. Please change the tasks workload or move
			events in your calendar.
		</p>
	</div>
	<div class="flex flex-row gap-8 mt-16 justify-end">
		<button class="secondary" type="button" (click)="close()">Cancel</button>
		<button type="button" (click)="apply([])">I don't care, just not now</button>
	</div>
</div>
