<div class="dashboard-container">
	<div class="dashboard-container main">
		<div class="dashboard-header">
			<h2 class="next-up-title">{{ getNextUpMessage() }}</h2>
			<a class="btn large" [routerLink]="[{ outlets: { modal: ['task', 'new'] } }]">
				<svg-icon class="img" src="/assets/icons/icon-plus.svg"></svg-icon>
				<span>New task</span>
			</a>
		</div>
		<img *ngIf="nextUp.length === 0" class="next-up-finished" src="/assets/icons/icon-done.svg" alt="All done" />
		<ul *ngIf="nextUp.length > 0" class="next-up scroller">
			<li *ngFor="let task of nextUp">
				<app-work-unit-card [task]="task"></app-work-unit-card>
			</li>
		</ul>
		<div class="upcoming-work-units-header">
			<h2 class="upcoming-work-units-title">Upcoming work units</h2>
			<div class="filters">
				<button class="btn filter active">
					<svg-icon class="img" src="/assets/icons/icon-arrow.svg"></svg-icon>
					Upcoming
				</button>
				<button class="btn filter">
					<svg-icon class="img" src="/assets/icons/icon-check.svg"></svg-icon>
					Done
				</button>
			</div>
		</div>
		<img *ngIf="groupedUpcoming.length === 0" class="next-up-finished" src="/assets/images/no-workunits.svg" alt="No upcoming" />
		<ul class="upcoming-work-units-list scroller">
			<li *ngFor="let upcomingGroup of groupedUpcoming" class="date-group">
				<span *ngIf="today.getWeekNumber(true) !== upcomingGroup.date.getWeekNumber(true) &&
					today.addDays(7).getWeekNumber(true) !== upcomingGroup.date.getWeekNumber(true)" class="date-spacer">
					{{ upcomingGroup.date.toLocaleDateString('default', { year: 'numeric', month: 'long' }) }}
				</span>
				<span *ngIf="today.getWeekNumber(true) === upcomingGroup.date.getWeekNumber(true)" class="date-spacer">
					This week
				</span>
				<span *ngIf="today.addDays(7).getWeekNumber(true) === upcomingGroup.date.getWeekNumber(true)" class="date-spacer">
					Next week
				</span>
				<ul>
					<li *ngFor="let task of upcomingGroup.tasks">
						<app-work-unit-upcoming [task]="task"></app-work-unit-upcoming>
					</li>
				</ul>
			</li>
		</ul>
	</div>
	<div class="dashboard-container deadlines">
		<h2>Upcoming deadlines</h2>
		<ul class="deadline-list scroller">
			<li *ngFor="let deadlineGroup of groupedDeadlines" class="date-group">
				<span class="date-spacer">
					{{
						deadlineGroup.date.toLocaleDateString('default', {
							weekday: 'long'
						})
					}},
					{{
						deadlineGroup.date.toLocaleDateString('default', {
							year: 'numeric',
							month: 'long',
							day: 'numeric'
						})
					}}
				</span>
				<ul>
					<li *ngFor="let deadline of deadlineGroup.tasks">
						<app-deadline [task]="deadline"></app-deadline>
					</li>
				</ul>
			</li>
		</ul>
	</div>
	<router-outlet name="modal"></router-outlet>
</div>
